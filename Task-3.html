<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>India Energy Statistics Dashboard 2025 — State Comparison</title>
  <!-- Single-file build: CSS + JS embedded. No external deps required except Chart.js (CDN). -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    :root {
      --bg: #0b1020;            /* dark indigo background */
      --panel: #141a33;         /* card/panel */
      --border: #24306a;        /* thin border */
      --text: #eef2ff;          /* main text */
      --muted: #a8b3e6;         /* muted text */
      --accent: #6ea8fe;        /* brand accent */
      --good: #61d394;          /* green */
      --warn: #ffd166;          /* yellow */
      --danger: #ff6b6b;        /* red */
      --chip: #0f1533;          /* chip bg */
      --row: #0f1630;           /* table row alt */
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; background: linear-gradient(120deg, #0b1020 0%, #0f1630 100%);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial;
      color: var(--text);
    }

    .container { max-width: 1280px; margin: 0 auto; padding: 18px clamp(14px, 3vw, 28px); }

    header.dashboard-header { padding: 8px 0 18px; border-bottom: 1px solid var(--border); position: sticky; top: 0; backdrop-filter: blur(6px); background: linear-gradient(120deg, #0b1020cc, #0f1630cc); z-index: 3; }
    header h1 { margin: 4px 0 6px; font-size: clamp(20px, 2.7vw, 32px); letter-spacing: .2px; }
    header .subtitle { margin: 0; color: var(--muted); font-size: .98rem; }

    .state-selector { display: grid; grid-template-columns: 1fr auto 1fr; gap: 14px; align-items: end; margin: 18px 0 14px; }
    .state-select-container { background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 12px; }
    .form-label { display: block; color: var(--muted); font-size: .9rem; margin-bottom: 6px; }
    .state-dropdown { width: 100%; padding: 10px 12px; border-radius: 10px; border: 1px solid var(--border); background: #0f1533; color: var(--text); }
    .vs-divider { font-weight: 800; color: var(--accent); padding: 0 8px 12px; }

    .comparison-container { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    @media (max-width: 1000px) { .comparison-container { grid-template-columns: 1fr; } }

    .state-panel { background: var(--panel); border: 1px solid var(--border); border-radius: 16px; overflow: hidden; }
    .state-title { display:flex; justify-content: space-between; align-items: center; gap: 10px; padding: 12px 14px; border-bottom: 1px solid var(--border); background: #121838; }
    .state-title h2 { margin: 0; font-size: clamp(16px, 2vw, 20px); }

    .energy-data { padding: 12px; }
    .category { margin-bottom: 14px; background: #0f1533; border: 1px solid var(--border); border-radius: 14px; overflow: hidden; }
    .category-header { display:flex; justify-content: space-between; align-items:center; padding: 12px 12px; border-bottom: 1px solid var(--border); }
    .category-title { margin: 0; font-size: 1rem; letter-spacing:.2px; }
    .category-total { font-size: .92rem; color: var(--muted); }

    .info { padding: 8px 12px; color: var(--muted); font-size: .9rem; border-bottom: 1px dashed var(--border); }

    .kv-row { display:grid; grid-template-columns: 1.2fr 1fr; padding: 10px 12px; gap: 10px; }
    .kv-row:nth-child(even) { background: var(--row); }
    .kv-label { color: #b9c6ff; }

    .progress-bar { height: 8px; background: #0d1333; border: 1px solid var(--border); border-radius: 999px; overflow: hidden; margin: 10px 12px 12px; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, #6ea8fe, #9ec1ff); width: 0; }

    /* Power-BI-like tabular blocks */
    .table-block { margin-top: 8px; padding: 8px 12px 14px; }
    table.data { width: 100%; border-collapse: collapse; border: 1px solid var(--border); overflow: hidden; border-radius: 12px; }
    table.data thead th { background: #101643; color: var(--muted); text-align: left; padding: 10px 12px; font-weight: 600; border-bottom: 1px solid var(--border); }
    table.data tbody td { padding: 10px 12px; border-bottom: 1px solid var(--border); }
    table.data tbody tr:nth-child(even) { background: var(--row); }

    .chips { display:flex; flex-wrap: wrap; gap: 8px; padding: 8px 12px 12px; }
    .chip { background: var(--chip); border:1px solid var(--border); color: var(--muted); padding: 4px 10px; border-radius: 999px; font-size: .82rem; }

    .no-data, .empty-state { padding: 14px; color: var(--muted); text-align: center; }

    .dashboard-footer { margin-top: 18px; border-top: 1px solid var(--border); padding-top: 10px; color: var(--muted); font-size: .9rem; }

    .cards-2 { display:grid; grid-template-columns: 1.2fr .8fr; gap: 16px; margin-top: 16px; }
    @media (max-width: 1100px) { .cards-2 { grid-template-columns: 1fr; } }

    .panel { background: var(--panel); border: 1px solid var(--border); border-radius: 16px; overflow: hidden; }
    .panel-hd { display:flex; justify-content: space-between; align-items:center; padding: 12px 14px; border-bottom: 1px solid var(--border); }

    .legend { display:flex; gap:10px; align-items:center; color: var(--muted); font-size:.88rem; }
    .bullet { width: 10px; height: 10px; border-radius: 2px; display:inline-block; background:#6ea8fe; }

    .toolbar { display:flex; gap:10px; align-items:center; }
    .btn { background:#0d1240; border:1px solid var(--border); color:#dfe6ff; padding:8px 12px; border-radius: 10px; cursor:pointer; }
    .btn:disabled { opacity:.6; cursor:not-allowed; }
  </style>
</head>
<body>
  <div class="container">
    <header class="dashboard-header">
      <h1>India Energy Statistics Dashboard 2025</h1>
      <p class="subtitle">Based on Official Government Data — MoSPI & MNRE</p>
    </header>

    <div class="state-selector">
      <div class="state-select-container">
        <label for="state1" class="form-label">State 1</label>
        <select id="state1" class="form-control state-dropdown">
          <option value="">Select State</option>
        </select>
      </div>
      <div class="vs-divider">VS</div>
      <div class="state-select-container">
        <label for="state2" class="form-label">State 2</label>
        <select id="state2" class="form-control state-dropdown">
          <option value="">Select State</option>
        </select>
      </div>
    </div>

    <div class="comparison-container">
      <div class="state-panel" id="state1-panel">
        <div class="state-title">
          <h2 id="state1-name">Select a State</h2>
        </div>
        <div class="energy-data" id="state1-data">
          <div class="no-data">Please select a state to view energy data</div>
        </div>
      </div>

      <div class="state-panel" id="state2-panel">
        <div class="state-title">
          <h2 id="state2-name">Select a State</h2>
        </div>
        <div class="energy-data" id="state2-data">
          <div class="no-data">Please select a state to view energy data</div>
        </div>
      </div>
    </div>

    <!-- Comparison summary & charts -->
    <section class="cards-2" style="margin-top: 18px;">
      <div class="panel">
        <div class="panel-hd">
          <h3 style="margin:0; font-size:1rem;">Comparison Summary (Key Metrics)</h3>
          <div class="toolbar">
            <button id="swapBtn" class="btn">Swap States</button>
          </div>
        </div>
        <div class="table-block">
          <table class="data" id="summaryTable">
            <thead>
              <tr>
                <th>Metric</th>
                <th id="thState1">State 1</th>
                <th id="thState2">State 2</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Total Coal Reserves (MT)</td>
                <td id="sumCoal1">-</td>
                <td id="sumCoal2">-</td>
              </tr>
              <tr>
                <td>Total Lignite Reserves (MT)</td>
                <td id="sumLignite1">-</td>
                <td id="sumLignite2">-</td>
              </tr>
              <tr>
                <td>Oil (MT) + Gas (BCM) Reserves</td>
                <td id="sumOilGas1">-</td>
                <td id="sumOilGas2">-</td>
              </tr>
              <tr>
                <td>RE Potential (MW)</td>
                <td id="sumREPot1">-</td>
                <td id="sumREPot2">-</td>
              </tr>
              <tr>
                <td>Installed RE (MW)</td>
                <td id="sumREInst1">-</td>
                <td id="sumREInst2">-</td>
              </tr>
            </tbody>
          </table>
          <div class="chips" id="notesChips">
            <span class="chip">Values shown are as-provided in dataset (MoSPI/MNRE derived).</span>
            <span class="chip">Hover on categories for definitions.</span>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-hd">
          <h3 style="margin:0; font-size:1rem;">RE Potential Mix — Side by Side</h3>
          <div class="legend"><span class="bullet"></span> MW</div>
        </div>
        <div style="padding: 12px;">
          <canvas id="mixChart" height="220"></canvas>
        </div>
      </div>
    </section>

    <footer class="dashboard-footer">
      <p>Data Source: Energy Statistics India 2025 — Ministry of Statistics and Programme Implementation (MoSPI) & Ministry of New and Renewable Energy (MNRE)</p>
      <p>© 2025 Government of India — Official Statistics</p>
    </footer>
  </div>

  <script>
// ====== DATA FROM YOUR MESSAGE (trimmed to included states) ======
const energyData = {
  "Andhra Pradesh": { "coal_reserves": {"proved": 1025, "indicated": 2369, "inferred": 778, "total": 4172, "percentage": 1.07 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 11.11, "crude_oil_pct": 1.66, "natural_gas": 59.27, "natural_gas_pct": 5.42 }, "renewable_potential": {"wind": 123336, "small_hydro": 409, "biomass": 1999, "cogeneration": 280, "solar": 38440, "large_hydro": 2596, "total": 167060, "percentage": 7.92 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Arunachal Pradesh": { "coal_reserves": {"proved": 31, "indicated": 40, "inferred": 19, "total": 90, "percentage": 0.02 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 2.97, "crude_oil_pct": 0.44, "natural_gas": 7.33, "natural_gas_pct": 0.67 }, "renewable_potential": {"wind": 246, "small_hydro": 2065, "biomass": 18, "cogeneration": 0, "solar": 8650, "large_hydro": 50394, "total": 61373, "percentage": 2.91 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Assam": { "coal_reserves": {"proved": 465, "indicated": 57, "inferred": 3, "total": 525, "percentage": 0.13 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 148.13, "crude_oil_pct": 22.13, "natural_gas": 164.51, "natural_gas_pct": 15.03 }, "renewable_potential": {"wind": 459, "small_hydro": 202, "biomass": 322, "cogeneration": 0, "solar": 13760, "large_hydro": 643, "total": 15386, "percentage": 0.73 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Bihar": { "coal_reserves": {"proved": 2346, "indicated": 3015, "inferred": 37, "total": 5398, "percentage": 1.39 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 4023, "small_hydro": 527, "biomass": 964, "cogeneration": 347, "solar": 11200, "large_hydro": 130, "total": 17191, "percentage": 0.81 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Chhattisgarh": { "coal_reserves": {"proved": 40078, "indicated": 41093, "inferred": 1495, "total": 82666, "percentage": 21.23 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 2749, "small_hydro": 1098, "biomass": 354, "cogeneration": 0, "solar": 18270, "large_hydro": 1311, "total": 23782, "percentage": 1.13 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Goa": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 14, "small_hydro": 5, "biomass": 33, "cogeneration": 0, "solar": 880, "large_hydro": 0, "total": 932, "percentage": 0.04 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Gujarat": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"proved": 1279, "indicated": 284, "inferred": 1160, "total": 2722, "percentage": 5.76 }, "oil_gas_reserves": {"crude_oil": 120.33, "crude_oil_pct": 17.97, "natural_gas": 55.46, "natural_gas_pct": 5.07 }, "renewable_potential": {"wind": 180790, "small_hydro": 202, "biomass": 2638, "cogeneration": 555, "solar": 35770, "large_hydro": 550, "total": 220505, "percentage": 10.45 }, "renewable_installed": {"total_re": 27460, "solar": 13535, "wind": 11717, "bio": 2208, "percentage": 14.41 } },
  "Haryana": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 593, "small_hydro": 107, "biomass": 1353, "cogeneration": 362, "solar": 4560, "large_hydro": 0, "total": 6976, "percentage": 0.33 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Himachal Pradesh": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 239, "small_hydro": 3460, "biomass": 70, "cogeneration": 0, "solar": 33840, "large_hydro": 18305, "total": 55914, "percentage": 2.65 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Jammu & Kashmir": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"proved": 0, "indicated": 20, "inferred": 7, "total": 28, "percentage": 0.06 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 1, "small_hydro": 1707, "biomass": 83, "cogeneration": 0, "solar": 111050, "large_hydro": 12972, "total": 125813, "percentage": 5.96 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Jharkhand": { "coal_reserves": {"proved": 59877, "indicated": 27135, "inferred": 4799, "total": 91812, "percentage": 23.58 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 4.86, "natural_gas_pct": 0.44 }, "renewable_potential": {"wind": 16, "small_hydro": 228, "biomass": 146, "cogeneration": 0, "solar": 18180, "large_hydro": 300, "total": 18870, "percentage": 0.89 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Karnataka": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 169251, "small_hydro": 3726, "biomass": 1794, "cogeneration": 1762, "solar": 24700, "large_hydro": 4414, "total": 205648, "percentage": 9.75 }, "renewable_installed": {"total_re": 21440, "solar": 8547, "wind": 6018, "bio": 4875, "percentage": 11.25 } },
  "Kerala": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"proved": 0, "indicated": 0, "inferred": 10, "total": 10, "percentage": 0.02 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 2621, "small_hydro": 647, "biomass": 778, "cogeneration": 0, "solar": 6110, "large_hydro": 2473, "total": 12629, "percentage": 0.6 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Madhya Pradesh": { "coal_reserves": {"proved": 15425, "indicated": 12379, "inferred": 5011, "total": 32815, "percentage": 8.43 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 24.38, "natural_gas_pct": 2.23 }, "renewable_potential": {"wind": 55423, "small_hydro": 820, "biomass": 2516, "cogeneration": 0, "solar": 61660, "large_hydro": 2819, "total": 123239, "percentage": 5.84 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Maharashtra": { "coal_reserves": {"proved": 8163, "indicated": 3372, "inferred": 1817, "total": 13352, "percentage": 3.43 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 173868, "small_hydro": 786, "biomass": 2630, "cogeneration": 3917, "solar": 64320, "large_hydro": 3144, "total": 248665, "percentage": 11.79 }, "renewable_installed": {"total_re": 17530, "solar": 6989, "wind": 5439, "bio": 5102, "percentage": 9.2 } },
  "Manipur": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 0, "small_hydro": 100, "biomass": 62, "cogeneration": 0, "solar": 10630, "large_hydro": 615, "total": 11407, "percentage": 0.54 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Meghalaya": { "coal_reserves": {"proved": 96, "indicated": 17, "inferred": 471, "total": 583, "percentage": 0.15 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 55, "small_hydro": 230, "biomass": 69, "cogeneration": 0, "solar": 5860, "large_hydro": 2026, "total": 8240, "percentage": 0.39 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Mizoram": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 0, "small_hydro": 169, "biomass": 3, "cogeneration": 0, "solar": 9090, "large_hydro": 1927, "total": 11189, "percentage": 0.53 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Nagaland": { "coal_reserves": {"proved": 9, "indicated": 22, "inferred": 448, "total": 478, "percentage": 0.12 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 2.38, "crude_oil_pct": 0.36, "natural_gas": 0.09, "natural_gas_pct": 0.01 }, "renewable_potential": {"wind": 0, "small_hydro": 182, "biomass": 54, "cogeneration": 0, "solar": 7290, "large_hydro": 325, "total": 7851, "percentage": 0.37 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Odisha": { "coal_reserves": {"proved": 53799, "indicated": 39053, "inferred": 6351, "total": 99204, "percentage": 25.47 }, "lignite_reserves": {"proved": 6, "indicated": 0, "inferred": 0, "total": 6, "percentage": 0.01 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 12129, "small_hydro": 286, "biomass": 299, "cogeneration": 0, "solar": 25780, "large_hydro": 2825, "total": 41318, "percentage": 1.96 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Punjab": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 428, "small_hydro": 578, "biomass": 3022, "cogeneration": 414, "solar": 2810, "large_hydro": 1301, "total": 8554, "percentage": 0.41 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Rajasthan": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"proved": 1204, "indicated": 3109, "inferred": 2274, "total": 6586, "percentage": 13.93 }, "oil_gas_reserves": {"crude_oil": 116.68, "crude_oil_pct": 17.43, "natural_gas": 63.55, "natural_gas_pct": 5.81 }, "renewable_potential": {"wind": 284250, "small_hydro": 52, "biomass": 1300, "cogeneration": 0, "solar": 142310, "large_hydro": 411, "total": 428322, "percentage": 20.3 }, "renewable_installed": {"total_re": 27100, "solar": 21345, "wind": 5192, "bio": 563, "percentage": 14.22 } },
  "Sikkim": { "coal_reserves": {"proved": 0, "indicated": 58, "inferred": 43, "total": 101, "percentage": 0.03 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 0, "small_hydro": 267, "biomass": 5, "cogeneration": 0, "solar": 4940, "large_hydro": 6051, "total": 11262, "percentage": 0.53 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Tamil Nadu": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"proved": 5476, "indicated": 21412, "inferred": 10635, "total": 37524, "percentage": 79.34 }, "oil_gas_reserves": {"crude_oil": 8.72, "crude_oil_pct": 1.3, "natural_gas": 36.57, "natural_gas_pct": 3.34 }, "renewable_potential": {"wind": 95107, "small_hydro": 604, "biomass": 1560, "cogeneration": 639, "solar": 17670, "large_hydro": 1785, "total": 117366, "percentage": 5.56 }, "renewable_installed": {"total_re": 21153, "solar": 7482, "wind": 10713, "bio": 2958, "percentage": 11.1 } },
  "Telangana": { "coal_reserves": {"proved": 11257, "indicated": 8497, "inferred": 3452, "total": 23206, "percentage": 5.96 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 54717, "small_hydro": 102, "biomass": 1678, "cogeneration": 117, "solar": 20410, "large_hydro": 1302, "total": 78327, "percentage": 3.71 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Tripura": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0.07, "crude_oil_pct": 0.01, "natural_gas": 28.18, "natural_gas_pct": 2.58 }, "renewable_potential": {"wind": 0, "small_hydro": 47, "biomass": 34, "cogeneration": 0, "solar": 2080, "large_hydro": 0, "total": 2161, "percentage": 0.1 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Uttar Pradesh": { "coal_reserves": {"proved": 884, "indicated": 178, "inferred": 0, "total": 1062, "percentage": 0.27 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 510, "small_hydro": 461, "biomass": 2800, "cogeneration": 4926, "solar": 22830, "large_hydro": 502, "total": 32028, "percentage": 1.52 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Uttarakhand": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 49, "small_hydro": 1664, "biomass": 93, "cogeneration": 215, "solar": 16800, "large_hydro": 13481, "total": 32303, "percentage": 1.53 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "West Bengal": { "coal_reserves": {"proved": 18752, "indicated": 11433, "inferred": 3773, "total": 33958, "percentage": 8.72 }, "lignite_reserves": {"proved": 0, "indicated": 1, "inferred": 3, "total": 4, "percentage": 0.01 }, "oil_gas_reserves": {"crude_oil": 0.11, "crude_oil_pct": 0.02, "natural_gas": 44.37, "natural_gas_pct": 4.06 }, "renewable_potential": {"wind": 1281, "small_hydro": 392, "biomass": 1742, "cogeneration": 0, "solar": 6260, "large_hydro": 809, "total": 10484, "percentage": 0.5 }, "renewable_installed": {"total_re": 0, "percentage": 0 } },
  "Delhi": { "coal_reserves": {"total": 0, "percentage": 0 }, "lignite_reserves": {"total": 0, "percentage": 0 }, "oil_gas_reserves": {"crude_oil": 0, "natural_gas": 0 }, "renewable_potential": {"wind": 0, "small_hydro": 0, "biomass": 0, "cogeneration": 0, "solar": 2050, "large_hydro": 0, "total": 2050, "percentage": 0.1 }, "renewable_installed": {"total_re": 0, "percentage": 0 } }
};

// Tooltip content definitions
const tooltipContent = {
  coal: { proved: "Coal reserves that have been thoroughly explored and are confirmed to exist", indicated: "Coal reserves indicated by geological surveys but not fully proven", inferred: "Coal reserves inferred from geological data but with limited exploration" },
  lignite: { proved: "Confirmed lignite (brown coal) reserves ready for extraction", indicated: "Probable lignite reserves based on initial surveys", inferred: "Potential lignite reserves requiring further exploration" },
  oil_gas: { crude_oil: "Proven crude oil reserves in the state", natural_gas: "Proven natural gas reserves available for extraction" },
  renewable: { wind: "Estimated wind energy generation potential at 100m height", solar: "Solar energy potential considering land availability and solar irradiance", large_hydro: "Hydroelectric power potential from large river systems", small_hydro: "Small-scale hydroelectric potential from rivers and streams", biomass: "Energy potential from agricultural residues and organic waste", cogeneration: "Combined heat and power generation potential" },
  installed: { solar: "Currently installed solar power capacity", wind: "Currently installed wind power capacity", bio: "Currently installed biomass and waste-to-energy capacity" }
};

// ====== UI Helpers ======
function formatNumber(num){ if(num===0) return '0'; if(num==null || isNaN(num)) return '-'; if(num < 1000) return num.toFixed(1); if(num < 1_000_000) return (num/1000).toFixed(1)+'K'; return (num/1_000_000).toFixed(1)+'M'; }

function progress(widthPct){ return `<div class="progress-bar"><div class="progress-fill" style="width:${Math.min(Math.max(widthPct,0),100)}%"></div></div>`; }

// ====== Populate dropdowns & defaults ======
document.addEventListener('DOMContentLoaded', function(){
  populateDropdowns();
  setDefaultSelections();
  document.getElementById('swapBtn').addEventListener('click', swapStates);
});

function populateDropdowns(){
  const ids = ['state1','state2'];
  const states = Object.keys(energyData).sort();
  ids.forEach(id=>{
    const sel = document.getElementById(id);
    states.forEach(s=> sel.add(new Option(s, s)) );
    sel.addEventListener('change', ()=> updateStateData(id));
  });
}

function setDefaultSelections(){
  document.getElementById('state1').value = 'Rajasthan';
  document.getElementById('state2').value = 'Gujarat';
  updateStateData('state1');
  updateStateData('state2');
}

function swapStates(){
  const s1 = document.getElementById('state1');
  const s2 = document.getElementById('state2');
  const tmp = s1.value; s1.value = s2.value; s2.value = tmp;
  updateStateData('state1');
  updateStateData('state2');
}

// ====== Render per-state panels ======
function updateStateData(stateId){
  const select = document.getElementById(stateId);
  const stateName = select.value;
  const nameEl = document.getElementById(`${stateId}-name`);
  const dataEl = document.getElementById(`${stateId}-data`);

  if(!stateName){ nameEl.textContent = 'Select a State'; dataEl.innerHTML = '<div class="no-data">Please select a state to view energy data</div>'; updateComparisons(); return; }

  nameEl.textContent = stateName;
  const data = energyData[stateName];
  dataEl.innerHTML = generateEnergyDataHTML(data);
  attachTooltips(dataEl);
  updateComparisons();
}

function attachTooltips(scope){
  scope.querySelectorAll('[data-tip]').forEach(el=>{
    el.addEventListener('mouseenter', ()=>{ el.setAttribute('title', el.getAttribute('data-tip')); });
  });
}

function kv(label, value, unit=''){
  const v = (value==null || isNaN(value)) ? '-' : `${formatNumber(value)} ${unit}`.trim();
  return `<div class="kv-row"><div class="kv-label">${label}</div><div class="kv-value">${v}</div></div>`;
}

function generateEnergyDataHTML(data){
  let html = '';
  // Coal
  if(data.coal_reserves && data.coal_reserves.total>0){
    html += `<div class="category">
      <div class="category-header"><h3 class="category-title">Coal Reserves</h3><span class="category-total">${formatNumber(data.coal_reserves.total)} MT (${data.coal_reserves.percentage}%)</span></div>
      <div class="info">Coal reserves economically extractable. Unit: Million Tonnes (MT).</div>
      ${kv('Proved', data.coal_reserves.proved, 'MT')}
      ${kv('Indicated', data.coal_reserves.indicated, 'MT')}
      ${kv('Inferred', data.coal_reserves.inferred, 'MT')}
      ${progress(data.coal_reserves.percentage*4)}
    </div>`;
  }
  // Lignite
  if(data.lignite_reserves && data.lignite_reserves.total>0){
    html += `<div class="category">
      <div class="category-header"><h3 class="category-title">Lignite Reserves</h3><span class="category-total">${formatNumber(data.lignite_reserves.total)} MT (${data.lignite_reserves.percentage}%)</span></div>
      <div class="info">Lignite (brown coal) primarily for power generation.</div>
      ${data.lignite_reserves.proved!=null ? kv('Proved', data.lignite_reserves.proved, 'MT'):''}
      ${data.lignite_reserves.indicated!=null ? kv('Indicated', data.lignite_reserves.indicated, 'MT'):''}
      ${data.lignite_reserves.inferred!=null ? kv('Inferred', data.lignite_reserves.inferred, 'MT'):''}
      ${progress((data.lignite_reserves.percentage||0)*1.2)}
    </div>`;
  }
  // Oil & Gas
  if(data.oil_gas_reserves && ((data.oil_gas_reserves.crude_oil||0)>0 || (data.oil_gas_reserves.natural_gas||0)>0)){
    html += `<div class="category">
      <div class="category-header"><h3 class="category-title">Oil & Gas Reserves</h3><span class="category-total">Crude + Natural Gas</span></div>
      <div class="info">Commercially extractable hydrocarbon reserves.</div>
      ${(data.oil_gas_reserves.crude_oil||0)>0 ? kv('Crude Oil', data.oil_gas_reserves.crude_oil, 'MT ('+(data.oil_gas_reserves.crude_oil_pct||0)+'%)'): ''}
      ${(data.oil_gas_reserves.natural_gas||0)>0 ? kv('Natural Gas', data.oil_gas_reserves.natural_gas, 'BCM ('+(data.oil_gas_reserves.natural_gas_pct||0)+'%)'): ''}
      ${progress(((data.oil_gas_reserves.crude_oil_pct||0)+(data.oil_gas_reserves.natural_gas_pct||0))*4)}
    </div>`;
  }
  // Renewable Potential
  if(data.renewable_potential && data.renewable_potential.total>0){
    html += `<div class="category">
      <div class="category-header"><h3 class="category-title">Renewable Energy Potential</h3><span class="category-total">${formatNumber(data.renewable_potential.total)} MW (${data.renewable_potential.percentage}%)</span></div>
      <div class="info">Technical potential from government resource assessments.</div>
      ${kv('Wind', data.renewable_potential.wind, 'MW')}
      ${kv('Solar', data.renewable_potential.solar, 'MW')}
      ${kv('Large Hydro', data.renewable_potential.large_hydro, 'MW')}
      ${kv('Small Hydro', data.renewable_potential.small_hydro, 'MW')}
      ${kv('Biomass', data.renewable_potential.biomass, 'MW')}
      ${progress(data.renewable_potential.percentage*4)}
    </div>`;
  }
  // Installed RE
  if(data.renewable_installed && data.renewable_installed.total_re>0){
    html += `<div class="category">
      <div class="category-header"><h3 class="category-title">Installed Renewable Energy</h3><span class="category-total">${formatNumber(data.renewable_installed.total_re)} MW (${data.renewable_installed.percentage}%)</span></div>
      <div class="info">Operational RE capacity (Solar, Wind, Biomass/WtE).</div>
      ${data.renewable_installed.solar!=null ? kv('Solar', data.renewable_installed.solar, 'MW'):''}
      ${data.renewable_installed.wind!=null ? kv('Wind', data.renewable_installed.wind, 'MW'):''}
      ${data.renewable_installed.bio!=null ? kv('Biomass & WtE', data.renewable_installed.bio, 'MW'):''}
      ${progress((data.renewable_installed.percentage||0)*6)}
    </div>`;
  }

  if(html==='') html = '<div class="empty-state">No significant energy data available for this state</div>';
  return html;
}

// ====== Comparison Table & Chart ======
let mixChart = null;
function updateComparisons(){
  const s1 = document.getElementById('state1').value;
  const s2 = document.getElementById('state2').value;
  document.getElementById('thState1').textContent = s1 || 'State 1';
  document.getElementById('thState2').textContent = s2 || 'State 2';

  const d1 = s1 ? energyData[s1] : null;
  const d2 = s2 ? energyData[s2] : null;

  const coal1 = d1?.coal_reserves?.total || 0; const coal2 = d2?.coal_reserves?.total || 0;
  const lign1 = d1?.lignite_reserves?.total || 0; const lign2 = d2?.lignite_reserves?.total || 0;
  const og1 = ((d1?.oil_gas_reserves?.crude_oil||0) + (d1?.oil_gas_reserves?.natural_gas||0));
  const og2 = ((d2?.oil_gas_reserves?.crude_oil||0) + (d2?.oil_gas_reserves?.natural_gas||0));
  const rep1 = d1?.renewable_potential?.total || 0; const rep2 = d2?.renewable_potential?.total || 0;
  const rei1 = d1?.renewable_installed?.total_re || 0; const rei2 = d2?.renewable_installed?.total_re || 0;

  document.getElementById('sumCoal1').textContent = coal1 ? coal1.toLocaleString('en-IN') : '-';
  document.getElementById('sumCoal2').textContent = coal2 ? coal2.toLocaleString('en-IN') : '-';
  document.getElementById('sumLignite1').textContent = lign1 ? lign1.toLocaleString('en-IN') : '-';
  document.getElementById('sumLignite2').textContent = lign2 ? lign2.toLocaleString('en-IN') : '-';
  document.getElementById('sumOilGas1').textContent = og1 ? og1.toLocaleString('en-IN') : '-';
  document.getElementById('sumOilGas2').textContent = og2 ? og2.toLocaleString('en-IN') : '-';
  document.getElementById('sumREPot1').textContent = rep1 ? rep1.toLocaleString('en-IN') : '-';
  document.getElementById('sumREPot2').textContent = rep2 ? rep2.toLocaleString('en-IN') : '-';
  document.getElementById('sumREInst1').textContent = rei1 ? rei1.toLocaleString('en-IN') : '-';
  document.getElementById('sumREInst2').textContent = rei2 ? rei2.toLocaleString('en-IN') : '-';

  // RE potential mix chart (side-by-side bars)
  const labels = ['Wind','Solar','Large Hydro','Small Hydro','Biomass'];
  const s1mix = d1 ? [d1.renewable_potential?.wind||0, d1.renewable_potential?.solar||0, d1.renewable_potential?.large_hydro||0, d1.renewable_potential?.small_hydro||0, d1.renewable_potential?.biomass||0] : [0,0,0,0,0];
  const s2mix = d2 ? [d2.renewable_potential?.wind||0, d2.renewable_potential?.solar||0, d2.renewable_potential?.large_hydro||0, d2.renewable_potential?.small_hydro||0, d2.renewable_potential?.biomass||0] : [0,0,0,0,0];

  const ctx = document.getElementById('mixChart');
  if(mixChart){ mixChart.destroy(); }
  mixChart = new Chart(ctx, {
    type: 'bar',
    data: { labels, datasets: [
      { label: s1 || 'State 1', data: s1mix },
      { label: s2 || 'State 2', data: s2mix }
    ]},
    options: { responsive: true, maintainAspectRatio: false,
      plugins: { legend: { position: 'bottom', labels: { color: '#dfe6ff' } }, title: { display: false } },
      scales: { x: { ticks:{ color:'#cfd8ff' }, grid:{ display:false } }, y: { ticks:{ color:'#cfd8ff' }, grid:{ color:'#22306a' } } }
    }
  });
}
  </script>
</body>
</html>
